#
# Makefile : bare - Partition (Id: 0, Name: p0)
# Generated by XKY Configurator Tool v4.0a
#


# XKY install directory
export XKY_INSTALL=/home/peec/git/internal/XKY_dev/dev_jetson_bsp_new/install

include $(XKY_INSTALL)/Makefile.inc

# XKY OS installation directories
export XKY_PMK=$(XKY_INSTALL)/pmk
export XKY_POS=$(XKY_INSTALL)/pos
export XKY_LIBS=$(XKY_INSTALL)/libs



# pre processor flags
CPPFLAGS=\
-march=armv8-a\
-mcpu=cortex-a78\
-g\
-fno-builtin\
-nodefaultlibs\
-gdwarf-2\
-O2\
-Wall\
-fno-plt\
-DPMK_DEBUG_LEVEL=4\
-DBSP_CORE_COUNT=1\
-DPMK_BOOTLOADER_ADDR=0x00000000\
-DARMV8_JETSONAGXORIN\
-mstrict-align\
-static\
-Wl,--gc-sections\
-I.\
-B$(XKY_LIBS)/libxky/core\
-B$(XKY_LIBS)/libxky/arch/armv8\
-B$(XKY_LIBS)/libxky/arch/arm\
-B$(XKY_LIBS)/libxky\
-B$(XKY_POS)/bare/bsp\
-B$(XKY_POS)/bare/core\
-B$(XKY_POS)/bare\
-B$(XKY_LIBS)/libprintf

# c compiler flags
CFLAGS=

# archiver flags
ARFLAGS=

# linker flags
LDFLAGS=\
-march=armv8-a\
-mcpu=cortex-a78\
-g\
-fno-builtin\
-nodefaultlibs\
-gdwarf-2\
-O2\
-Wall\
-fno-plt\
-DPMK_DEBUG_LEVEL=4\
-DBSP_CORE_COUNT=1\
-DPMK_BOOTLOADER_ADDR=0x00000000\
-DARMV8_JETSONAGXORIN\
-mstrict-align\
-static\
-Wl,--gc-sections\
-nostdlib\
-nostartfiles\
-T$(XKY_POS)/bare/linkcmds.ld

# partition source files
C_SOURCES=$(wildcard *.c)
S_SOURCES=$(wildcard *.S)

# makefile custom include
-include usr_custom.mk

# partition object files
OBJECTS=$(C_SOURCES:.c=.o) $(S_SOURCES:.S=.o)

# all
.PHONY : all
all: p0.exe

# clean
.PHONY : clean
clean:
	$(RM) $(OBJECTS)
	$(RM) p0.exe
	$(RM) p0.art

# distclean
.PHONY : distclean
distclean: clean
	$(RM) init.c
	$(RM) linkcmds.inc
	$(RM) Makefile

# p0.exe
p0.exe: $(OBJECTS)
	$(CC)\
		$(LDFLAGS)\
		-Wl,--start-group\
		-Wl,--build-id=none\
		-L$(XKY_PMK)/\
		$(XKY_POS)/bare/bare.a\
		-lgcc -lc -lm\
		$(XKY_LIBS)/libxky/libxky.a\
		$(XKY_LIBS)/libprintf/libprintf.a\
		$^\
		-Wl,--end-group\
		-o $@
